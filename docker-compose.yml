services:
  aicon-api:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    env_file:
      - .env
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - ASPNETCORE_URLS=http://+:8080
      # Bedrock credentials (Bedrock:AccessKey / Bedrock:SecretKey)
      - Bedrock__Region=${BEDROCK_REGION:-eu-west-1}
      - Bedrock__ModelId=${BEDROCK_MODEL_ID:-eu.anthropic.claude-haiku-4-5-20251001-v1:0}
      - Bedrock__MaxTokens=${BEDROCK_MAX_TOKENS:-2048}
      - Bedrock__AccessKey=${BEDROCK_ACCESS_KEY}
      - Bedrock__SecretKey=${BEDROCK_SECRET_KEY}
      # Polly credentials (Polly:AccessKey / Polly:SecretKey)
      - Polly__Region=${POLLY_REGION:-eu-west-1}
      - Polly__VoiceId=${POLLY_VOICE_ID:-Amy}
      - Polly__Engine=${POLLY_ENGINE:-neural}
      - Polly__AccessKey=${POLLY_ACCESS_KEY}
      - Polly__SecretKey=${POLLY_SECRET_KEY}
    # Alternatif: ~/.aws/credentials mount etmek istersen aşağıyı aç
    # volumes:
    #   - ${HOME}/.aws:/root/.aws:ro
